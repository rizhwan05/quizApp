<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUIZ - Results</title>
    <link rel="stylesheet" href="results.css">
</head>
<body>
    <h1>QUIZ Results</h1>
    <div class="container">
        <div id="userDetails"></div>
        <div id="userScore"></div>
        <div id="topScores" class="hidden"></div>
        <button id="showHighScores">Show High Scores</button>
        <button id="playAgain">Play Again</button>
    </div>

    <script>
        const userName = localStorage.getItem('userName');
        const userEmail = localStorage.getItem('userEmail');
        let userScore = 0;

        const correctAnswers = {
        q1: 'b',
        q2: 'd',
        q3: 'a',
        q4: 'd',
        q5: 'a',
        q6: 'a',
        q7: 'c',
        q8: 'c',
        q9: 'b',
        q10: 'c',
        q21: 'b',
        q22: 'c',
        q23: 'b',
        q24: 'c',
        q25: 'c', 
        q26: 'b',
        q27: 'c',
        q28: 'b',
        q29: 'a',
        q30: 'c',
    };


        for (const [key, value] of Object.entries(correctAnswers)) {
            const userAnswer = localStorage.getItem(key);
            if (userAnswer === value) {
                userScore++;
            }
        }

        let scores = JSON.parse(localStorage.getItem('scores')) || [];
        scores.push({ name: userName, email: userEmail, score: userScore });
        scores.sort((a, b) => b.score - a.score);
        localStorage.setItem('scores', JSON.stringify(scores.slice(0, 3)));

        document.getElementById('userDetails').textContent = `Name: ${userName}, Email: ${userEmail}`;
        document.getElementById('userScore').textContent = `Your Score: ${userScore}`;

        const showHighScoresButton = document.getElementById('showHighScores');
        const playAgainButton = document.getElementById('playAgain');
        const topScoresDiv = document.getElementById('topScores');

        showHighScoresButton.addEventListener('click', () => {
            let topScoresHtml = '<h2>Top 3 Scores</h2><ol>';
            scores.slice(0, 3).forEach(score => {
                topScoresHtml += `<li>${score.name} (${score.email}): ${score.score}</li>`;
            });
            topScoresHtml += '</ol>';
            topScoresDiv.innerHTML = topScoresHtml;
            topScoresDiv.classList.remove('hidden');
        });

        playAgainButton.addEventListener('click', () => {
            localStorage.clear();
            window.location.href = 'index.html';
        });
    </script>
</body>
</html>
